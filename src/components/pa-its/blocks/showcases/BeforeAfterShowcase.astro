---
import SectionWrapper from '~/layouts/SectionWrapper.astro';
import Image from '~/components/common/Image.astro';
import { type ImageMetadata } from 'astro';

export interface BeforeAfterSet {
  beforeImage: {
    src: ImageMetadata;
    alt: string;
  };
  afterImage: {
    src: ImageMetadata;
    alt: string;
  };
  title: string;
  description?: string;
}

export interface Props {
  title: string;
  subtitle?: string;
  projects: BeforeAfterSet[];
}

const { title, subtitle, projects } = Astro.props;
---

<SectionWrapper>
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold mb-4">{title}</h2>
      {subtitle && <p class="text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">{subtitle}</p>}
    </div>

    <div class="space-y-16">
      {
        projects.map((project) => (
          <div class="grid md:grid-cols-2 gap-6 items-center">
            <div class="space-y-4">
              <h3 class="text-2xl font-bold">{project.title}</h3>
              {project.description && <p class="text-gray-600 dark:text-gray-400">{project.description}</p>}

              <div class="grid grid-cols-2 gap-4">
                <div class="space-y-2">
                  <div class="aspect-w-4 aspect-h-3 overflow-hidden rounded-lg shadow-md">
                    <Image
                      src={project.beforeImage.src}
                      alt={project.beforeImage.alt}
                      class="object-cover w-full h-full"
                      loading="lazy"
                      width={500}
                      height={375}
                    />
                  </div>
                  <p class="text-center font-medium">Vorher</p>
                </div>

                <div class="space-y-2">
                  <div class="aspect-w-4 aspect-h-3 overflow-hidden rounded-lg shadow-md">
                    <Image
                      src={project.afterImage.src}
                      alt={project.afterImage.alt}
                      class="object-cover w-full h-full"
                      loading="lazy"
                      width={500}
                      height={375}
                    />
                  </div>
                  <p class="text-center font-medium">Nachher</p>
                </div>
              </div>
            </div>

            <div class="aspect-w-16 aspect-h-9 overflow-hidden rounded-lg shadow-md">
              <Image
                src={project.afterImage.src}
                alt={`${project.title} - Vollansicht`}
                class="object-cover w-full h-full"
                loading="lazy"
                width={800}
                height={450}
              />
            </div>
          </div>
        ))
      }
    </div>
  </div>
</SectionWrapper>
