---
import SectionWrapper from '~/layouts/SectionWrapper.astro';

export interface Props {
  title?: string;
  subtitle?: string;
  videoUrl?: string;
  videoEmbedId?: string;
  placeholder?: {
    title: string;
    description: string;
    icon?: string;
  };
}

const { title, subtitle, videoUrl, videoEmbedId, placeholder } = Astro.props;
---

<SectionWrapper>
  <div class="max-w-4xl mx-auto">
    {
      title && (
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">{title}</h2>
          {subtitle && <p class="text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">{subtitle}</p>}
        </div>
      )
    }

    <div class="aspect-video bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden">
      {
        videoEmbedId && (
          <iframe
            class="w-full h-full"
            src={`https://www.youtube.com/embed/${videoEmbedId}`}
            title={title || 'Video'}
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          />
        )
      }
      {
        !videoEmbedId && videoUrl && (
          <video class="w-full h-full object-cover" controls preload="metadata">
            <source src={videoUrl} type="video/mp4" />
            Ihr Browser unterst√ºtzt das Video-Element nicht.
          </video>
        )
      }
      {
        !videoEmbedId && !videoUrl && placeholder && (
          <div class="flex items-center justify-center h-full">
            <div class="text-center">
              {placeholder.icon && (
                <div class="w-16 h-16 mx-auto mb-4 text-gray-400">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    {placeholder.icon === 'play' ? (
                      <>
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                          d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"
                        />
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                          d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                        />
                      </>
                    ) : (
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.5"
                        d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    )}
                  </svg>
                </div>
              )}
              <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2">{placeholder.title}</h3>
              <p class="text-gray-500 dark:text-gray-400">{placeholder.description}</p>
            </div>
          </div>
        )
      }
      {
        !videoEmbedId && !videoUrl && !placeholder && (
          <div class="flex items-center justify-center h-full">
            <div class="text-center">
              <div class="w-16 h-16 mx-auto mb-4 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2">Video wird geladen...</h3>
              <p class="text-gray-500 dark:text-gray-400">Bitte warten Sie einen Moment.</p>
            </div>
          </div>
        )
      }
    </div>

    <slot />
  </div>
</SectionWrapper>
