---
import { Icon } from 'astro-icon/components';
import SectionWrapper from '~/layouts/SectionWrapper.astro';
import Button from '~/components/pa-its/Button.astro';

interface Material {
  name: string;
  description?: string;
}

interface Reference {
  name: string;
  location?: string;
  image?: string;
}

interface Step {
  title: string;
  description: string;
  icon?: string;
}

export interface Props {
  title: string;
  shortDescription: string;
  longDescription: string;
  features: string[];
  materials?: Material[];
  differentiators?: string[];
  targetAudience?: string[];
  benefits?: string[];
  references?: Reference[];
  process?: Step[];
  color: string;
  icon: string;
}

const {
  title,
  shortDescription,
  longDescription,
  features,
  materials,
  differentiators,
  targetAudience,
  benefits,
  references,
  process,
  color,
  icon,
} = Astro.props;
---

<SectionWrapper id="service-details">
  <div class="container mx-auto px-4 py-8">
    <div class="flex flex-wrap items-center mb-12">
      <div class={`mr-4 p-3 rounded-full bg-${color}-100 dark:bg-${color}-900`}>
        <Icon name={icon} class={`w-8 h-8 text-${color}-600 dark:text-${color}-400`} />
      </div>
      <h1 class="text-4xl font-bold">{title}</h1>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-10">
      <h2 class="text-2xl font-semibold mb-4">Kurzbeschreibung</h2>
      <p class="text-lg mb-6">{shortDescription}</p>
      <div class="border-t border-gray-200 dark:border-gray-700 pt-6">
        <h2 class="text-2xl font-semibold mb-4">Detaillierte Beschreibung</h2>
        <p class="text-lg mb-6" set:html={longDescription} />

        {
          features && features.length > 0 && (
            <div class="mb-8">
              <h3 class="text-xl font-semibold mb-4">Leistungen</h3>
              <ul class="list-disc pl-6 space-y-2">
                {features.map((feature) => (
                  <li class="text-lg">{feature}</li>
                ))}
              </ul>
            </div>
          )
        }
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
      {
        materials && materials.length > 0 && (
          <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold mb-4">Materialien und Techniken</h2>
            <ul class="list-disc pl-6 space-y-2">
              {materials.map((material) => (
                <li class="text-lg">
                  <strong>{material.name}</strong>
                  {material.description && <p class="mt-1">{material.description}</p>}
                </li>
              ))}
            </ul>
          </div>
        )
      }

      {
        differentiators && differentiators.length > 0 && (
          <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold mb-4">Warum Q-MA-Bau?</h2>
            <ul class="list-disc pl-6 space-y-2">
              {differentiators.map((item) => (
                <li class="text-lg">{item}</li>
              ))}
            </ul>
          </div>
        )
      }
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
      {
        targetAudience && targetAudience.length > 0 && (
          <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold mb-4">Für wen geeignet?</h2>
            <ul class="list-disc pl-6 space-y-2">
              {targetAudience.map((audience) => (
                <li class="text-lg">{audience}</li>
              ))}
            </ul>
          </div>
        )
      }

      {
        benefits && benefits.length > 0 && (
          <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold mb-4">Ihr Nutzen</h2>
            <ul class="list-disc pl-6 space-y-2">
              {benefits.map((benefit) => (
                <li class="text-lg">{benefit}</li>
              ))}
            </ul>
          </div>
        )
      }
    </div>

    {
      references && references.length > 0 && (
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-10">
          <h2 class="text-2xl font-semibold mb-4">Referenzprojekte</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {references.map((reference) => (
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden">
                {reference.image && <img src={reference.image} alt={reference.name} class="w-full h-48 object-cover" />}
                <div class="p-4">
                  <h3 class="font-bold text-lg">{reference.name}</h3>
                  {reference.location && <p class="text-gray-600 dark:text-gray-400">{reference.location}</p>}
                </div>
              </div>
            ))}
          </div>
        </div>
      )
    }

    {
      process && process.length > 0 && (
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-10">
          <h2 class="text-2xl font-semibold mb-4">Ablauf und Service</h2>
          <div class="space-y-8">
            {process.map((step, index) => (
              <div class="flex">
                <div class="flex-shrink-0">
                  <div
                    class={`flex items-center justify-center w-12 h-12 rounded-full bg-${color}-100 dark:bg-${color}-900 text-${color}-600 dark:text-${color}-400`}
                  >
                    {step.icon ? (
                      <Icon name={step.icon} class="w-6 h-6" />
                    ) : (
                      <span class="font-bold text-lg">{index + 1}</span>
                    )}
                  </div>
                </div>
                <div class="ml-4">
                  <h3 class="text-xl font-semibold">{step.title}</h3>
                  <p class="mt-2 text-gray-600 dark:text-gray-400">{step.description}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      )
    }

    <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-8 text-center">
      <h2 class="text-2xl font-bold mb-4">Interesse an unseren Leistungen?</h2>
      <p class="text-lg mb-6">Kontaktieren Sie uns für ein unverbindliches Angebot oder eine Beratung</p>
      <div class="flex justify-center gap-4">
        <Button href="/contact" variant="primary">Jetzt Beratung anfragen</Button>
        <Button href="/leistungen" variant="outline">Weitere Leistungen</Button>
      </div>
    </div>
  </div>
</SectionWrapper>
