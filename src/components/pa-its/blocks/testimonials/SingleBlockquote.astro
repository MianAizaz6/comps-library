---
import { type ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import SectionWrapper from '~/layouts/SectionWrapper.astro';
import Button from '../../Button.astro';

export interface Props {
  id?: string;
  title?: string;
  quote: string;
  image?: ImageMetadata;
  imageAlt?: string;
  author: string;
  position?: string;
  cta?: boolean;
}

const { id, title, quote, image, imageAlt, author, position, cta = false } = Astro.props;
---

<SectionWrapper id={id ?? 'testimonials'}>
  <div class="max-w-screen-xl px-4 py-8 mx-auto text-center lg:px-6">
    <figure class="max-w-screen-md mx-auto">
      <div class="flex items-center justify-center mb-6">
        <svg
          class="h-12 text-gray-400 dark:text-gray-600"
          viewBox="0 0 24 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M14.017 18L14.017 10.609C14.017 4.905 17.748 1.039 23 0L23.995 2.151C21.563 3.068 20 5.789 20 8H24V18H14.017ZM0 18V10.609C0 4.905 3.748 1.038 9 0L9.996 2.151C7.563 3.068 6 5.789 6 8H9.983L9.983 18L0 18Z"
            fill="currentColor"></path>
        </svg>
      </div>
      {
        title && (
          <div class="mb-6">
            <h3 class="text-2xl font-bold text-gray-900 dark:text-white text-center" set:html={title} />
          </div>
        )
      }
      <blockquote>
        <p class="text-2xl font-normal mb-3 text-gray-900 dark:text-white" set:html={quote} />
      </blockquote>
      {cta && <Button href={'/contact'} title={'Kontakt' as string} type="default" />}
      <figcaption class="flex items-center justify-center mt-6 space-x-3">
        {image && <Image class="w-8 h-8 rounded-full" src={image} alt={imageAlt ?? ''} />}
        <div class="flex items-center divide-x-2 divide-gray-500 dark:divide-gray-700">
          <div class="pr-3 font-medium text-gray-900 dark:text-white" set:html={author} />
          {position && <div class="pl-3 text-sm font-light text-gray-500 dark:text-gray-400" set:html={position} />}
        </div>
      </figcaption>
    </figure>
  </div>
</SectionWrapper>
