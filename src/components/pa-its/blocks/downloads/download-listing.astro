---
import SectionWrapper from '~/layouts/SectionWrapper.astro';
import WHGImg from '~/assets/images/downloads/whg-certificate.png';
import zerImg from '~/assets/images/downloads/zer.png';
import trainingImg from '~/assets/images/downloads/training.png';
import { Image } from 'astro:assets';

const downloadsData = [
  {
    category: 'Nachhaltigkeit',
    title: 'WHG-Fachbetriebsprüfung erfolgreich bestanden',
    description: `Seit der Firmengründung im Jahr 2016 ist der Titel „WHG-Fachbetrieb“ ein essenzieller Baustein im Tagesgeschäft von Q-MA Bau. Um dieses Prädikat weiterhin führen zu dürfen, bedarf es einer speziellen Zertifizierung, welche alle zwei Jahre durch Sachverständige des TÜVs durchgeführt wird. Wir freuen uns, die sogenannte WHG-Fachbetriebsprüfung erneut erfolgreich bestanden haben und bis 04/2026 wieder zertifiziert zu sein!
Mit dieser Qualifikation erfüllen wir alle Anforderungen gemäß § 62 (1) der Verordnung über Anlagen zum Umgang mit wassergefährdenden Stoffen (AwSV). 
Sie bescheinigt uns den fachgerechten Umgang mit Anlagen zum Lagern, Abfüllen, Umschlagen (LAU) sowie Herstellen, Behandeln, Verwenden (HBV) von Wassergefährdenden Stoffen. In diesem Zusammenhang sind wir erneut Autorisiert solche Anlagen zu errichten, Instand zusetzten oder Stillzulegen. Unsere Kunden können sich somit auch in den kommenden Jahren weiterhin auf höchste Standards verlassen – sowohl in der Ausführung als auch bei der Einhaltung gesetzlicher Vorschriften. 
`,
    time: '2016',
    image: WHGImg,
    download: '~/assets/images/downloads/whg-certificate.png',
  },
  {
    category: 'Referenzkunden',
    title: 'Erfolgreiche Re-Zertifizierung nach SCC**',
    description: `Wir freuen uns, mitteilen zu können, dass wir im Rahmen eines jährlichen Audits die SCC** Rezertifizierung erfolgreich durchgeführt haben. 
Das Zertifikat bestätigt erneut, dass unser Unternehmen im Bereich Tiefbau höchsten Anforderungen an Sicherheit, Gesundheits- und Umweltschutz (SGU) gerecht wird – sowohl auf der Baustelle als auch in der betrieblichen Organisation.
Gerade im Bau- und Tiefbausektor, wo komplexe Arbeitsabläufe, schweres Gerät und wechselnde Einsatzorte zur Tagesordnung gehören, ist eine konsequente Umsetzung von SGU-Maßnahmen unerlässlich. Unsere erfolgreiche Zertifizierung ist ein Beleg dafür, dass Sicherheit bei uns nicht nur Vorschrift, sondern gelebte Praxis ist.
Ein herzliches Dankeschön an unser gesamtes Team für das tägliche Engagement und den verantwortungsvollen Umgang mit Sicherheit und Umwelt.
`,
    time: '15-12-2023',
    image: zerImg,
    download: '~/assets/images/downloads/zer.png',
  },

  {
    category: 'Referenzkunden',
    title: 'Produktschulung bei Euroteam – Fachgerechter Einsatz von Fugenmaterialien und spezial WHG-Mörtel',
    description: `Unser Team hat im Juli an einer Produktschulung der Euroteam Bauchemie GmbH in Dillingen teilgenommen. Im Fokus standen die fachgerechte Verarbeitung des spezialmörtels EUROREPAIR PC96 WHG und der WHG Fugendichtstoffe der Firma EUROTEAM. Die Schulung umfasste sowohl theoretische Grundlagen als auch praktische Anwendungen direkt vor Ort – mit besonderem Augenmerk auf die Untergrundvorbereitung, Applikationstechniken und Verarbeitung der Produkte für optimale Ergebnisse.
Mit diesem Know-how sind wir bestens vorbereitet, um Fugenabdichtarbeiten und Beton-Schadstellensanierungen in LAU-Anlagen durchzuführen.`,
    time: '15-12-2023',
    image: trainingImg,
    download: '~/assets/images/downloads/zer.png',
  },
];
---

<SectionWrapper class="bg-gray-50 py-16 px-4">
  <div class="max-w-7xl mx-auto grid md:grid-cols-4 gap-6">
    {
      downloadsData.map((card) => (
        <div class="dark:bg-white bg-gray-900 rounded-xl shadow-md overflow-hidden border border-green-200 flex flex-col">
          <div class="bg-primary">
            <Image src={card.image} alt={card.title} class="h-48 w-full object-contain" />
          </div>
          <div class="p-5 flex flex-col justify-between flex-grow">
            {/* <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-700 mb-3">
              {card.category}
            </span> */}
            <h3 class="text-md font-bold leading-5 dark:text-gray-900 text-white line-clamp-2">{card.title}</h3>
            <p class="text-sm dark:text-gray-600 text-white mt-2 flex-grow line-clamp-3">{card.description}</p>
            <p class="text-xs dark:text-gray-400 text-white mt-2">{card.time}</p>
            <div class="flex gap-3 mt-4">
              <a
                href={`${card.image.src}`}
                download
                class="bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 hover:bg-green-600 transition"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v16h16V4H4zm4 8h8M12 8v8" />
                </svg>
                Download
              </a>

              <button
                type="button"
                class="text-sm dark:text-green-700 text-white font-medium flex items-center gap-1 hover:underline"
                data-modal-trigger
                data-title={card.title}
                data-description={card.description}
              >
                Learn More
              </button>
            </div>
          </div>
        </div>
      ))
    }
  </div>

  <!-- Modal Structure -->
  <div id="download-modal" class="fixed inset-0 z-50 bg-black bg-opacity-60 hidden items-center justify-center px-4">
    <div class="bg-white p-6 rounded-lg max-w-lg w-full relative">
      <button class="absolute top-3 right-3 text-gray-800 hover:text-gray-800" data-modal-close>✕</button>
      <h2 id="modal-title" class="text-xl text-gray-800 font-bold mb-2">Modal Title</h2>
      <p id="modal-description" class="text-sm text-gray-700 whitespace-pre-line">Modal content</p>
    </div>
  </div>
</SectionWrapper>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('download-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalDesc = document.getElementById('modal-description');

    document.querySelectorAll('[data-modal-trigger]').forEach((button) => {
      button.addEventListener('click', () => {
        modalTitle.textContent = button.getAttribute('data-title');
        modalDesc.textContent = button.getAttribute('data-description');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
      });
    });

    document.querySelector('[data-modal-close]').addEventListener('click', () => {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }
    });
  });
</script>
